{"id":4,"date":"2014-07-25T18:42:23","date_gmt":"2014-07-25T18:42:23","guid":{"rendered":"https:\/\/www.codeapex.com\/?p=4"},"modified":"2017-01-11T13:43:39","modified_gmt":"2017-01-11T21:43:39","slug":"restore-an-acer-c720-chromebook-to-stock-after-installing-linux-on-it","status":"publish","type":"post","link":"http:\/\/www.codeapex.com\/restore-an-acer-c720-chromebook-to-stock-after-installing-linux-on-it\/","title":{"rendered":"Restore an Acer C720 Chromebook to stock after installing Linux on it"},"content":{"rendered":"<h2>Situation:<\/h2>\n<p>Following a guide on the internet such as this one <a title=\"Installing Bodhi Linux on an Acer C720 Chromebook with SeaBIOS as default.\" href=\"http:\/\/www.codeapex.com\/installing-bodhi-linux-on-an-acer-c720-chromebook-with-seabios-as-default\/\" target=\"_blank\">here<\/a> for getting Linux installed on an Acer C720 Chromebook, summarized you:<\/p>\n<ol>\n<li>Switched the Chromebook to Developer Mode<\/li>\n<li>Enabled SeaBIOS<\/li>\n<li>Made SeaBIOS default on boot.<\/li>\n<li>Installed Linux<\/li>\n<\/ol>\n<h2>Objective:<\/h2>\n<p>Restore the Acer C720 Chromebook back to factory stock.<\/p>\n<h2>Plan + Execution:<\/h2>\n<p><!--more--><\/p>\n<p>First realize there are essentially two things we want back at stock:<\/p>\n<ol>\n<li>A fresh Chrome OS installed.<\/li>\n<li>The default BIOS and its stock settings.<\/li>\n<\/ol>\n<h3>Restoring Chrome OS<\/h3>\n<ol>\n<li>Find your version of your Chromebook by holding Ctrl+D on boot to get to the recovery screen. You will need it when creating the recovery USB flash drive by entering it when it asks for it in the creation script.<\/li>\n<li>Create a recovery USB flash drive for Chrome OS, follow the directions in step 2 here for the OS you are creating the recovery USB flash drive in: <a title=\"Create a recovery USB flash drive\" href=\"https:\/\/support.google.com\/chromebook\/answer\/1080595?hl=en\" target=\"_blank\">https:\/\/support.google.com\/chromebook\/answer\/1080595?hl=en<\/a> or see directions for Linux and Windows below:<br \/>\n<span class=\"collapseomatic \" id=\"id6362925731569\"  tabindex=\"0\" title=\"Directions for creating the recovery USB flash drive in Linux\"    >Directions for creating the recovery USB flash drive in Linux<\/span><div id=\"target-id6362925731569\" class=\"collapseomatic_content \">\n<ol>\n<li>\n<blockquote><p>Click this link to download the Recovery Tool: <a href=\"https:\/\/dl.google.com\/dl\/edgedl\/chromeos\/recovery\/linux_recovery.sh\" target=\"_blank\">https:\/\/dl.google.com\/dl\/edgedl\/chromeos\/recovery\/linux_recovery.sh<\/a><\/p><\/blockquote>\n<\/li>\n<li>\n<blockquote><p>Modify the script permissions to allow execution with the following command: <code>$ sudo chmod 755 linux_recovery.sh<\/code><\/p><\/blockquote>\n<\/li>\n<li>\n<blockquote><p>Run the script with root privileges with the following command: <code>$ sudo bash linux_recovery.sh<\/code><\/p><\/blockquote>\n<\/li>\n<li>\n<blockquote><p>Follow the prompts from the tool to complete building the operating system image.<\/p><\/blockquote>\n<\/li>\n<\/ol>\n<\/div>\n<br \/>\n<span class=\"collapseomatic \" id=\"id636292573159c\"  tabindex=\"0\" title=\"Directions for creating the recovery USB flash drive in Windows\"    >Directions for creating the recovery USB flash drive in Windows<\/span><div id=\"target-id636292573159c\" class=\"collapseomatic_content \">\n<ol>\n<li>\n<blockquote><p>Click this link to download the Recovery Tool: <a href=\"https:\/\/dl.google.com\/dl\/chromeos\/recovery\/chromeosimagecreatorV2.exe\" target=\"_blank\">https:\/\/dl.google.com\/dl\/chromeos\/recovery\/chromeosimagecreatorV2.exe<\/a> If you&#8217;re a network administrator for your school, business, or organization, click this link to download the Recovery Tool: <a href=\"https:\/\/dl.google.com\/dl\/chromeos\/recovery\/chromeosimagecreator.exe\" target=\"_blank\">https:\/\/dl.google.com\/dl\/chromeos\/recovery\/chromeosimagecreator.exe<\/a><\/p><\/blockquote>\n<\/li>\n<li>\n<blockquote><p>Run the tool and follow the instructions that appear on your screen.<\/p><\/blockquote>\n<\/li>\n<li>\n<blockquote><p>After you recover your Chromebook, you <em><strong>must<\/strong><\/em> format your USB flash drive or SD card using the Recovery Tool. If you don&#8217;t format your USB flash drive or SD card, you won\u2019t be able to use all the storage space on your external device. Additionally, your USB flash drive or SD card may not be recognizable by Windows. <a href=\"https:\/\/support.google.com\/chromebook\/answer\/2554370\">See instructions for reformatting your USB flash drive or SD card<\/a>.<\/p><\/blockquote>\n<\/li>\n<\/ol>\n<\/div><\/li>\n<li>Reinstall Chrome OS, step 3 here <a title=\"Create a recovery USB flash drive\" href=\"https:\/\/support.google.com\/chromebook\/answer\/1080595?hl=en\" target=\"_blank\">https:\/\/support.google.com\/chromebook\/answer\/1080595?hl=en<\/a> or see directions below:<br \/>\n<span class=\"collapseomatic \" id=\"id63629257315b7\"  tabindex=\"0\" title=\"Reinstall Chrome OS, step 3\"    >Reinstall Chrome OS, step 3<\/span><div id=\"target-id63629257315b7\" class=\"collapseomatic_content \">\n<ol>\n<li>\n<blockquote><p>Start your Chromebook.<\/p><\/blockquote>\n<\/li>\n<li>\n<blockquote><p>When the &#8220;Chrome OS is missing or damaged&#8221; screen appears, insert the USB flash drive or SD card you created into the USB port or SD card slot on your Chrome device. Note if the Chromebook is not booting to Recovery mode by default, hold down the <span style=\"color: #990000;\">ESC<\/span> and <span style=\"color: #990000;\">Refresh<\/span> (F3) keys and press the <span style=\"color: #990000;\">Power<\/span> button to get into Recovery mode.<\/p><\/blockquote>\n<\/li>\n<li>\n<blockquote><p>Wait for the Chromebook to boot up from the flash drive.<\/p><\/blockquote>\n<\/li>\n<li>\n<blockquote><p>Follow the instructions that appear on the screen.<\/p><\/blockquote>\n<\/li>\n<li>\n<blockquote><p>On successful installation of the Chrome operating system, you will be prompted to remove the USB flash drive or SD card.<\/p><\/blockquote>\n<\/li>\n<li>\n<blockquote><p>Remove the USB flash drive or SD card when prompted, and your Chromebook will automatically restart.<\/p><\/blockquote>\n<\/li>\n<\/ol>\n<\/div><\/li>\n<\/ol>\n<h3>Restore the default BIOS with stock settings<\/h3>\n<ol>\n<li>Remove the write-protect screw inside the Chromebook. Recall from when you did this to set SeaBIOS as default originally, it is screw 7 here: <a href=\"http:\/\/www.chromium.org\/_\/rsrc\/1381990807648\/chromium-os\/developer-information-for-chrome-os-devices\/acer-c720-chromebook\/c720-chromebook-annotated-innards.png\">http:\/\/www.chromium.org\/_\/rsrc\/1381990807648\/chromium-os\/developer-information-for-chrome-os-devices\/acer-c720-chromebook\/c720-chromebook-annotated-innards.png <\/a>Note: Putting the cover back on with just screw 6 in should be enough to boot and complete the rest of the needed steps before putting the write-protect screw back in.<\/li>\n<li>Switch the Chromebook to Developer mode: First hold down the <span style=\"color: #990000;\">ESC<\/span> and <span style=\"color: #990000;\">Refresh<\/span> (F3) keys and press the <span style=\"color: #990000;\">Power<\/span> button to power on the Chromebook. Then at the Recovery screen press <span style=\"color: #990000;\">Ctrl-D<\/span>. It will ask you to confirm, then reboot into dev-mode.On boot you will see a warning screen and will need to press <span style=\"color: #990000;\">Ctrl-D<\/span> or wait 30 seconds to continue booting.<\/li>\n<li>Start a terminal session. There are two ways to start a terminal session in Chrome OS (in dev-mode): VT-2 or crosh. For our purposes here it does not matter which way is used.<br \/>\n<span class=\"collapseomatic \" id=\"id63629257315d1\"  tabindex=\"0\" title=\"Get the command prompt through VT-2\"    >Get the command prompt through VT-2<\/span><div id=\"target-id63629257315d1\" class=\"collapseomatic_content \">\n<blockquote>\n<h4>Get the command prompt through VT-2<\/h4>\n<p>One way to get the login prompt is through something called VT-2, or &#8220;virtual terminal 2&#8221;. This is probably familiar to the Linux hackers out there. You can get to VT-2 by pressing:<\/p>\n<div>[ Ctrl ] [ Alt ] [ =&gt; ]<\/div>\n<p>&#8230;where the [ =&gt; ] key is the right-arrow key just above the number 3 on your keyboard.<\/p>\n<p>Once you have the login prompt, you should see a set of instructions telling you about command-line access. <span style=\"color: #ff0000;\">By default, you can login as the <\/span><code style=\"color: #38761d;\">chronos<\/code><span style=\"color: #ff0000;\"> user with no password. This includes the ability to do password-less sudo.<\/span> The instructions on the screen will tell you how you can set a password. They also tell you how to disable screen dimming.<\/p>\n<div>The instructions do tell you how to get back to the browser, but because it&#8217;s so important, I&#8217;ll also put it here. Just press:<\/div>\n<blockquote style=\"margin: 0px 0px 0px 40px; border-style: none; padding: 0px;\">\n<div>\n<div>[ Ctrl ] [ Alt ] [ &lt;= ]<\/div>\n<\/div>\n<\/blockquote>\n<div>&#8230;where the [ &lt;= ] key is the left-arrow key just above the number 1 on your keyboard.<\/div>\n<p><b>SIDE NOTE<\/b>: For the technical-minded, you may realize that the top-rows of the keyboard on a Chrome OS device are actually treated by Linux as the keys F1 through F10. Thus, the [ =&gt; ] key is actually F2 and the [ &lt;= ] key is actually F1.<\/p>\n<p><b>SIDE NOTE<\/b>: If you&#8217;re fooling around, you might also notice that kernel messages show up on VT-8.<\/p>\n<hr \/>\n<\/div>\n<br \/>\n<span class=\"collapseomatic \" id=\"id6362925731600\"  tabindex=\"0\" title=\"Getting the command prompt through crosh\"    >Getting the command prompt through crosh<\/span><div id=\"target-id6362925731600\" class=\"collapseomatic_content \">\n<h4>Getting the command prompt through crosh<\/h4>\n<div>Because you booted into developer mode, you also have an alternate way to get a terminal prompt. I&#8217;ll mention this as well, since the alternate shell is a little nicer (in the very least, it keeps your screen from dimming on you), even if it is a little harder to get to. To use this alternate way:<\/div>\n<div>\n<ol style=\"list-style-type: decimal;\">\n<li>Go through the standard Chrome OS login screen (you&#8217;ll need to setup a network, etc) and get to the web browser. It&#8217;s OK if you login as guest.<\/li>\n<li>Press [ Ctrl ] [ Alt ] [ T ] to get the crosh shell.<\/li>\n<li>Use the <code style=\"color: #006000;\">shell<\/code> command to get the shell prompt. NOTE: even if you set a password for the <code>chronos<\/code> user, you won&#8217;t need it here (though you still need it for <code>sudo<\/code> access)<\/li>\n<\/ol>\n<\/div>\n<p>Note that entering the shell this way doesn&#8217;t give you all the instructions that VT-2 does (like how to set your password). You might want to follow the VT-2 steps once just to get the instructions.<\/p>\n<p>If you want to get back to the browser without killing the shell, you can do it with [ Alt ] [ Tab ].<\/p>\n<p><b>SIDE NOTE<\/b>: You can actually create as many shells as you want. Just hit [ Ctrl ] [ Alt ] [ T ] again and a second shell will be opened. You can [ Alt ] [ Tab ] between them.<\/p><\/blockquote>\n<\/div><\/li>\n<li>In the terminal open a bash shell with the <code>shell<\/code> command. Then become superuser with <code>sudo bash<\/code>.<\/li>\n<li>Run these commands:\n<ol>\n<li><code>crossystem dev_boot_usb=1 dev_boot_legacy=1 disable_dev_request=1<\/code><\/li>\n<li><code>flashrom --wp-disable<\/code><\/li>\n<li><code>set_gbb_flags.sh 0\u00d7000<br \/>\n<\/code>(note: if set_gbb_flags.sh is not found then try this full path to script: \/usr\/share\/vboot\/bin\/set_gbb_flags.sh 0x000)<\/li>\n<li><code>flashrom --wp-enable<\/code><\/li>\n<li><code>chromeos-firmwareupdate --sb_extract \/tmp<\/code><\/li>\n<li><code>flashrom -w \/tmp\/bios.bin -i RW_LEGACY<\/code><\/li>\n<\/ol>\n<\/li>\n<li>Shutdown the Chromebook and replace the write-protect screw. Put the backcover back on with all the screws.<\/li>\n<li>The Chromebook should now be returned to stock.<\/li>\n<\/ol>\n","protected":false},"excerpt":{"rendered":"<p>Situation: Following a guide on the internet such as this one here for getting Linux installed on an Acer C720 Chromebook, summarized you: Switched the Chromebook to Developer Mode Enabled SeaBIOS Made SeaBIOS default on boot. Installed Linux Objective: Restore the Acer C720 Chromebook back to factory stock. Plan + Execution:<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"_genesis_hide_title":false,"_genesis_hide_breadcrumbs":false,"_genesis_hide_singular_image":false,"_genesis_hide_footer_widgets":false,"_genesis_custom_body_class":"","_genesis_custom_post_class":"","_genesis_layout":""},"categories":[1],"tags":[],"_links":{"self":[{"href":"http:\/\/www.codeapex.com\/wp-json\/wp\/v2\/posts\/4"}],"collection":[{"href":"http:\/\/www.codeapex.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"http:\/\/www.codeapex.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"http:\/\/www.codeapex.com\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"http:\/\/www.codeapex.com\/wp-json\/wp\/v2\/comments?post=4"}],"version-history":[{"count":1,"href":"http:\/\/www.codeapex.com\/wp-json\/wp\/v2\/posts\/4\/revisions"}],"predecessor-version":[{"id":222,"href":"http:\/\/www.codeapex.com\/wp-json\/wp\/v2\/posts\/4\/revisions\/222"}],"wp:attachment":[{"href":"http:\/\/www.codeapex.com\/wp-json\/wp\/v2\/media?parent=4"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"http:\/\/www.codeapex.com\/wp-json\/wp\/v2\/categories?post=4"},{"taxonomy":"post_tag","embeddable":true,"href":"http:\/\/www.codeapex.com\/wp-json\/wp\/v2\/tags?post=4"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}